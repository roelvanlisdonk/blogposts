---
ID: 4360
post_title: >
  Capture incoming http IIS traffic with
  fiddler 4 on Windows 10
author: Roel van Lisdonk
post_excerpt: ""
layout: post
permalink: >
  https://www.roelvanlisdonk.nl/2015/05/20/capture-incoming-http-iis-traffic-with-fiddler-4-on-windows-10/
published: true
post_date: 2015-05-20 14:34:03
---
<p>If you are running an IIS server and you want to capture HTTP traffic send from remote clients, you can add a custom rule in Fiddler.</p>  <p>&#160;</p>  <p>Before you create the custom rule make sure port 8888 is open in de Windows firewall.</p>  <p>Just add an new inbound firewall rule:</p>  <p>&#160;</p>  <p>Open Windows Firewall:</p>  <p><a href="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image1.png" rel="lightbox"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image_thumb1.png" width="150" height="244" /></a></p>  <p>&#160;</p>  <p>Click on “Advanced settings”:</p>  <p><a href="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image2.png" rel="lightbox"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px 5px; display: inline; padding-right: 0px" border="0" alt="image" src="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image_thumb2.png" width="580" height="290" /></a></p>  <p>&#160;</p>  <p>Click on “Inbound Rules” &gt; “New Rule…”:</p>  <p><a href="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image3.png" rel="lightbox"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image_thumb3.png" width="203" height="244" /></a></p>  <p>&#160;</p>  <p>Assume your computer has an ip4 address: </p>  <p>&#160;</p>  <p><a href="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image4.png" rel="lightbox"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px 5px; display: inline; padding-right: 0px" border="0" alt="image" src="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image_thumb4.png" width="331" height="301" /></a></p>  <p>&#160;</p>  <p>Click on “Port”:</p>  <p>&#160;</p>  <p><a href="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image5.png" rel="lightbox"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px 5px; display: inline; padding-right: 0px" border="0" alt="image" src="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image_thumb5.png" width="514" height="418" /></a></p>  <p>&#160;</p>  <p>Enter “8888” in the “Specific local ports” textbox:</p>  <p>&#160;</p>  <p><a href="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image6.png" rel="lightbox"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px 5px; display: inline; padding-right: 0px" border="0" alt="image" src="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image_thumb6.png" width="501" height="408" /></a></p>    <p><a href="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image7.png" rel="lightbox"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px 5px; display: inline; padding-right: 0px" border="0" alt="image" src="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image_thumb7.png" width="492" height="400" /></a></p>  <p>&#160;</p>  <p><a href="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image8.png" rel="lightbox"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px 5px; display: inline; padding-right: 0px" border="0" alt="image" src="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image_thumb8.png" width="498" height="405" /></a></p>  <p>&#160;</p>  <p>Enter “Port 8888” in the “Name” textbox and click Finish:</p>  <p><a href="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image9.png" rel="lightbox"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px 5px; display: inline; padding-right: 0px" border="0" alt="image" src="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image_thumb9.png" width="506" height="412" /></a></p>  <p>&#160;</p>  <p>&#160;</p>  <p>Now we are ready to add a custom rule to Fiddler:</p>  <p><a href="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image10.png" rel="lightbox"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px 5px; display: inline; padding-right: 0px" border="0" alt="image" src="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image_thumb10.png" width="332" height="305" /></a></p>  <p>&#160;</p>  <p>Assuming the ip4 address of the IIS machine = “10.2.200.20” and de site you want to debug run in IIS under port 80, then:</p>  <p>&#160;</p>  <p>In the “OnBeforeRequest” function add:</p>  <p>if (oSession.host.toLowerCase() == &quot;<strong>10.2.200.20</strong>:<strong>8888</strong>&quot;) oSession.host = &quot;<strong>10.2.200.20</strong>:<strong>80</strong>&quot;;</p>  <p>&#160;</p>  <p><a href="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image11.png" rel="lightbox"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px 5px; display: inline; padding-right: 0px" border="0" alt="image" src="http://www.roelvanlisdonk.nl/wp-content/uploads/2015/05/image_thumb11.png" width="580" height="206" /></a></p>  <p>&#160;</p>  <p>Restart fiddler and when you access the website from an other machine by using the 10.2.200.20:8888 address, fiddler should capture the traffic and pass is to the website running on port 80.</p>