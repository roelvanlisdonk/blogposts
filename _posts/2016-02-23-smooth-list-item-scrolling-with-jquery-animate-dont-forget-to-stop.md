---
ID: 4829
post_title: 'Smooth list item scrolling with jQuery Animate, don&rsquo;t forget to .stop()'
author: Roel van Lisdonk
post_excerpt: ""
layout: post
permalink: >
  https://www.roelvanlisdonk.nl/2016/02/23/smooth-list-item-scrolling-with-jquery-animate-dont-forget-to-stop/
published: true
post_date: 2016-02-23 16:32:24
---
<p>If you want to scroll to items in a list, when clicking on a button, you can use jQuery.animate(), but donâ€™t forget to do a .stop() before the .animate() to prevent jank.</p> <p><a title="https://plnkr.co/edit/PMvSmJ?p=preview" href="https://plnkr.co/edit/PMvSmJ?p=preview">https://plnkr.co/edit/PMvSmJ?p=preview</a></p> <p><a href="https://www.roelvanlisdonk.nl/wp-content/uploads/2016/02/image.png" rel="lightbox"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="https://www.roelvanlisdonk.nl/wp-content/uploads/2016/02/image_thumb.png" width="1081" height="744"></a></p> <p>&nbsp;</p> <h1>HTML</h1> <p><a href="https://www.roelvanlisdonk.nl/wp-content/uploads/2016/02/image-1.png" rel="lightbox"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="https://www.roelvanlisdonk.nl/wp-content/uploads/2016/02/image_thumb-1.png" width="1089" height="953"></a></p> <p>&nbsp;</p> <h1>TypeScript</h1> <p>&nbsp;</p> <p>module spike {<br>&nbsp;&nbsp;&nbsp; "use strict";<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; var _activeListItem: IListItem = null;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; var _items: Array&lt;IListItem&gt; = [<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { sortOrder: 1, title: "Item 1" },<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { sortOrder: 2, title: "Item 2" },<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { sortOrder: 3, title: "Item 3" },<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { sortOrder: 4, title: "Item 4" },<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { sortOrder: 5, title: "Item 5" },<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { sortOrder: 6, title: "Item 6" },<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { sortOrder: 7, title: "Item 7" },<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { sortOrder: 8, title: "Item 8" },<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { sortOrder: 9, title: "Item 9" },<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { sortOrder: 10, title: "Item 10" },<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { sortOrder: 11, title: "Item 11" }<br>&nbsp;&nbsp;&nbsp; ];<br>&nbsp;&nbsp;&nbsp; var _list: HTMLDivElement = &lt;HTMLDivElement&gt;document.getElementById("list");<br>&nbsp;&nbsp;&nbsp; var _$list = $(_list);</p> <p>&nbsp;&nbsp;&nbsp; export function getId(sortOrder: number): string {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return "target" + sortOrder.toString();<br>&nbsp;&nbsp;&nbsp; }</p> <p>&nbsp;&nbsp;&nbsp; export function onClickDown(evt: Event): void {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; evt.preventDefault();</p> <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (_activeListItem.sortOrder === _items.length) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p> <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (_activeListItem === null) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _activeListItem = _items[0];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p> <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; removeActiveClass();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _activeListItem = _items[_activeListItem.sortOrder];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scrollTo(getId(_activeListItem.sortOrder));<br>&nbsp;&nbsp;&nbsp; }</p> <p>&nbsp;&nbsp;&nbsp; export function onClickUp(evt: Event): void {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; evt.preventDefault();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (_activeListItem === null || _activeListItem.sortOrder === 1) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; removeActiveClass();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _activeListItem = _items[_activeListItem.sortOrder - 2];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scrollTo(getId(_activeListItem.sortOrder));<br>&nbsp;&nbsp;&nbsp; }</p> <p>&nbsp;&nbsp;&nbsp; export function removeActiveClass(): void {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var listItem = document.getElementById(getId(_activeListItem.sortOrder));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; listItem.classList.remove("active");<br>&nbsp;&nbsp;&nbsp; }</p> <p>&nbsp;&nbsp;&nbsp; export function renderListItems(list: HTMLDivElement): void {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var frag = document.createDocumentFragment();</p> <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _items.map((item) =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var div = document.createElement("div");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; div.id = "target" + item.sortOrder.toString();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; div.classList.add("list-item");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var content = document.createTextNode(item.title); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; div.appendChild(content);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; frag.appendChild(div);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p> <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; list.appendChild(frag);<br>&nbsp;&nbsp;&nbsp; }</p> <p>&nbsp;&nbsp;&nbsp; export function scrollTo(id: string) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var listItem = document.getElementById(id);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; listItem.classList.add("active");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var offsetTop = listItem.offsetTop;</p> <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _$list.stop().animate({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scrollTop: offsetTop - 40<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }, 500);<br>&nbsp;&nbsp;&nbsp; }</p> <p><br>&nbsp;&nbsp;&nbsp; renderListItems(_list);</p> <p>&nbsp;&nbsp;&nbsp; _activeListItem = _items[0];<br>&nbsp;&nbsp;&nbsp; scrollTo(getId(_activeListItem.sortOrder));</p> <p><br>&nbsp;&nbsp;&nbsp; export interface IListItem {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sortOrder: number;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; title: string;<br>&nbsp;&nbsp;&nbsp; }<br>}</p> <p>&nbsp;</p> <h1>CSS</h1> <p>body {<br>&nbsp;&nbsp;&nbsp; color: rgb(68, 68, 68);<br>&nbsp;&nbsp;&nbsp; font-family: "Open Sans", sans-serif;<br>}</p> <p>html, body, div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre,<br>abbr, address, cite, code,del, dfn, em, img, ins, kbd, q, samp,small, strong, sub, sup, var,<br>b, i, dl, dt, dd, ol, ul, li, fieldset, form, label, legend,table, caption, tbody, tfoot, thead,<br>tr, th, td, article, aside, canvas, details, figcaption, figure, footer, header, hgroup, menu, <br>nav, section, summary, time, mark, audio, video {<br>&nbsp;&nbsp;&nbsp; border: 0;<br>&nbsp;&nbsp;&nbsp; border-image-width: 0;<br>&nbsp;&nbsp;&nbsp; -webkit-box-sizing: border-box;<br>&nbsp;&nbsp;&nbsp; -moz-box-sizing: border-box;<br>&nbsp;&nbsp;&nbsp; box-sizing: border-box;<br>&nbsp;&nbsp;&nbsp; margin: 0;<br>&nbsp;&nbsp;&nbsp; outline: 0;<br>&nbsp;&nbsp;&nbsp; padding: 0;<br>}</p> <p>button {<br>&nbsp;&nbsp;&nbsp; border: 1px solid rgb(126, 33, 109);<br>&nbsp;&nbsp;&nbsp; background: none;<br>&nbsp;&nbsp;&nbsp; color: rgb(126, 33, 109);<br>&nbsp;&nbsp;&nbsp; cursor: pointer;<br>&nbsp;&nbsp;&nbsp; outline: none;<br>&nbsp;&nbsp;&nbsp; padding: 4px 4px 4px 4px;<br>&nbsp;&nbsp;&nbsp; position: relative;<br>&nbsp;&nbsp;&nbsp; -moz-user-select: none;<br>&nbsp;&nbsp;&nbsp; -ms-user-select: none;<br>&nbsp;&nbsp;&nbsp; -webkit-user-select: none;<br>&nbsp;&nbsp;&nbsp; user-select: none;<br>}</p> <p>button:hover {<br>&nbsp;&nbsp;&nbsp; background-color: #dbe0e0;<br>}</p> <p>.list {<br>&nbsp;&nbsp;&nbsp; bottom: 40px;<br>&nbsp;&nbsp;&nbsp; left: 0;<br>&nbsp;&nbsp;&nbsp; margin: 1px;<br>&nbsp;&nbsp;&nbsp; overflow-y: auto;<br>&nbsp;&nbsp;&nbsp; position: absolute;<br>&nbsp;&nbsp;&nbsp; right: 0;<br>&nbsp;&nbsp;&nbsp; top: 0;<br>}</p> <p>.list-item {<br>&nbsp;&nbsp;&nbsp; height: 80px;<br>&nbsp;&nbsp;&nbsp; margin: 10px;<br>&nbsp;&nbsp;&nbsp; padding: 10px;<br>}</p> <p>.title {<br>&nbsp;&nbsp;&nbsp; margin-left: 20px;<br>&nbsp;&nbsp;&nbsp; margin-top: 10px;<br>}</p> <p>.footer {<br>&nbsp;&nbsp;&nbsp; border-top: 1px solid rgb(126, 33, 109);<br>&nbsp;&nbsp;&nbsp; bottom: 0;<br>&nbsp;&nbsp;&nbsp; height: 40px;<br>&nbsp;&nbsp;&nbsp; left: 0;<br>&nbsp;&nbsp;&nbsp; padding-top: 6px;<br>&nbsp;&nbsp;&nbsp; padding-left: 6px;<br>&nbsp;&nbsp;&nbsp; position: absolute;<br>&nbsp;&nbsp;&nbsp; right: 0;<br>}</p> <p>.left {<br>&nbsp;&nbsp;&nbsp; border: 1px solid rgb(126, 33, 109);<br>&nbsp;&nbsp;&nbsp; bottom: 0;<br>&nbsp;&nbsp;&nbsp; left: 0;<br>&nbsp;&nbsp;&nbsp; position: absolute;<br>&nbsp;&nbsp;&nbsp; right: 50.5%;<br>&nbsp;&nbsp;&nbsp; top: 0;<br>}</p> <p>.right {<br>&nbsp;&nbsp;&nbsp; border: 1px solid rgb(126, 33, 109);<br>&nbsp;&nbsp;&nbsp; bottom: 0;<br>&nbsp;&nbsp;&nbsp; left: 50.5%;<br>&nbsp;&nbsp;&nbsp; position: absolute;<br>&nbsp;&nbsp;&nbsp; right: 0;<br>&nbsp;&nbsp;&nbsp; top: 0;<br>}</p> <p>.wrapper {<br>&nbsp;&nbsp;&nbsp; bottom: 20px;<br>&nbsp;&nbsp;&nbsp; left: 20px;<br>&nbsp;&nbsp;&nbsp; min-height: 300px;<br>&nbsp;&nbsp;&nbsp; overflow: hidden;<br>&nbsp;&nbsp;&nbsp; position: absolute;<br>&nbsp;&nbsp;&nbsp; right: 20px;<br>&nbsp;&nbsp;&nbsp; top: 40px;<br>}</p> <p>.active {<br>&nbsp;&nbsp;&nbsp; background-color: rgb(239, 222, 236);<br>}</p>