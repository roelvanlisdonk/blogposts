---
ID: 418
post_title: 'Asynchronous webservice calls without blocking/delaying rendering in ASP .NET 2.0 C#'
author: Roel van Lisdonk
post_excerpt: ""
layout: post
permalink: >
  https://www.roelvanlisdonk.nl/2009/05/22/asynchronous-webservice-calls-without-blockingdelaying-rendering-in-asp-net-20-c/
published: true
post_date: 2009-05-22 08:03:23
---
<div class="padten">   <div class="ms-inputuserfield padfive seventyp">     <div>       <div class="ExternalClassCD0F62B006694C229EAAEEAB4524F6CF">         <p>When you use the &quot;Async&quot; methods of a WebService in .NET 2.0 the ASP .NET 2.0 page will delay rendering until completion of the Async method call.           <br />This can be very handy, but what if you do not want to delay the rendering of the page, because you are not interested in the result.            <br />Then you must use another method: <strong>Delegates, BeginInvoke and Synchronous WebService call</strong>            <br />Yes, this is right &quot;<strong>Synchronous WebService call</strong>&quot;            <br />            <br /><span style="font-family: courier new; font-size: 10pt">&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> The delegate, used for asynchronous processing.</span></span>            <br /><span style="font-family: courier new; font-size: 10pt"><span style="color: blue">&#160;&#160;&#160; public</span> <span style="color: blue">delegate</span> TOutput <span style="color: #2b91af">SomeMethod</span>&lt;TOutput&gt;();</span>            <br />            <br /><span style="font-family: courier new; font-size: 10pt"><span style="color: gray">&#160;&#160;&#160; ///</span><span style="color: green"> </span><span style="color: gray">&lt;summary&gt;</span><span style="color: green">               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> Click Event, user clicked on the LinkButtonTest.               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green">                <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> History               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> [RVL 01-feb-2008] Creation               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> </span><span style="color: gray">&lt;/summary&gt;               <br /></span>&#160;&#160;&#160; <span style="color: blue">protected</span> <span style="color: blue">void</span> LinkButtonTest_Click(<span style="color: blue">object</span> sender, <span style="color: #2b91af">EventArgs</span> e)              <br />&#160;&#160;&#160; {              <br />&#160;&#160;&#160;&#160; <span style="color: blue">this</span>.AsnchronousProgramming();              <br />&#160;&#160;&#160; }</span>            <br />            <br /><span style="font-family: courier new; font-size: 10pt">&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> </span><span style="color: gray">&lt;summary&gt;               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> Test the asynchronous execution of a method via a delegate and BeginInvoke in .NET 2.0               <br /></span>&#160;&#160;&#160; <span style="color: gray">///               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> History               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> [RVL 01-feb-2008] Creation               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> </span><span style="color: gray">&lt;/summary&gt;               <br /></span>&#160;&#160;&#160; <span style="color: blue">private</span> <span style="color: blue">void</span> AsnchronousProgramming()              <br />&#160;&#160;&#160; {              <br />&#160;&#160;&#160;&#160; <span style="color: #2b91af">Debug</span>.WriteLine(<span style="color: #a31515">&quot;Start the asynchronous processen&quot;</span>);              <br />&#160;&#160;&#160;&#160; <span style="color: #2b91af">SomeMethod</span>&lt;<span style="color: blue">int</span>&gt; method = <span style="color: blue">this</span>.SomeCalculation;              <br />&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160; method.BeginInvoke(EndSomeCalculation, method);              <br />              <br />&#160;&#160;&#160;&#160; <span style="color: #2b91af">Debug</span>.WriteLine(<span style="color: #a31515">&quot;We can do some processing here&quot;</span>);              <br />&#160;&#160;&#160; }</span>            <br />            <br /><span style="font-family: courier new; font-size: 10pt">&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> </span><span style="color: gray">&lt;summary&gt;               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> The calculation is done.               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green">                <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> History               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> [RVL 01-feb-2008] Creation               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> </span><span style="color: gray">&lt;/summary&gt;               <br /></span>&#160;&#160;&#160; <span style="color: blue">public</span> <span style="color: blue">void</span> EndSomeCalculation(<span style="color: #2b91af">IAsyncResult</span> result)              <br />&#160;&#160;&#160; {              <br />&#160;&#160;&#160;&#160; <span style="color: #2b91af">Debug</span>.WriteLine(<span style="color: #a31515">&quot;SomeCalculatoin completed&quot;</span>);              <br />&#160;&#160;&#160;&#160; <span style="color: #2b91af">SomeMethod</span>&lt;<span style="color: blue">int</span>&gt; method = result.AsyncState <span style="color: blue">as</span> <span style="color: #2b91af">SomeMethod</span>&lt;<span style="color: blue">int</span>&gt;;              <br />              <br />&#160;&#160;&#160;&#160; <span style="color: #2b91af">Debug</span>.WriteLine(<span style="color: #a31515">&quot;Get result&quot;</span>);              <br />&#160;&#160;&#160;&#160; <span style="color: blue">int</span> i = method.EndInvoke(result);              <br />&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160; <span style="color: #2b91af">Debug</span>.WriteLine(<span style="color: #a31515">&quot;Asynchronous processing completed&quot;</span>);              <br />&#160;&#160;&#160; }</span>            <br />            <br /><span style="font-family: courier new; font-size: 10pt"><span style="color: gray">///</span><span style="color: green"> </span><span style="color: gray">&lt;summary&gt;               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> Some calculation to demonstrate the asynchronous execution.               <br /></span>&#160;&#160;&#160; <span style="color: gray">///               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> History               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> [RVL 01-feb-2008] Creation               <br /></span>&#160;&#160;&#160; <span style="color: gray">///</span><span style="color: green"> </span><span style="color: gray">&lt;/summary&gt;               <br /></span>&#160;&#160;&#160; <span style="color: blue">private</span> <span style="color: blue">int</span> SomeCalculation()              <br />&#160;&#160;&#160; {              <br />&#160;&#160;&#160;&#160; <span style="color: blue">int</span> result = 1;              <br />              <br />&#160;&#160;&#160;&#160; <span style="color: #2b91af">Debug</span>.WriteLine(<span style="color: #a31515">&quot;Simulate syncronous webservice call or lang during processing (10s)&quot;</span>);              <br />&#160;&#160;&#160;&#160; <span style="color: #2b91af">Thread</span>.Sleep(10000);              <br />              <br />&#160;&#160;&#160;&#160; <span style="color: #2b91af">Debug</span>.WriteLine(<span style="color: #a31515">&quot;Calcula
te the result&quot;</span>);              <br />&#160;&#160;&#160;&#160; result += 1;              <br />              <br />&#160;&#160;&#160;&#160; <span style="color: blue">return</span> result;              <br />&#160;&#160;&#160; }</span>            <br />            <br />See also: Matthew Cochran, <a href="http://www.c-sharpcorner.com/UploadFile/rmcochran/multithreadedasync05112007061031AM/multithreadedasync.aspx">http://www.c-sharpcorner.com/UploadFile/rmcochran/multithreadedasync05112007061031AM/multithreadedasync.aspx</a>            <br />            <br /></p>       </div>     </div>   </div> </div>